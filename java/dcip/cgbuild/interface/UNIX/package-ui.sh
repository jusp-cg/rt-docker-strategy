#!/bin/sh

# ------------------------------------------------------------------------
# Build angular UI script
# ------------------------------------------------------------------------


# ------------------------------------------------------------------------
# CD out of the cgbuild directory (./cgbuild/interface/UNIX) for
# the rest of the relative paths within this script to work
# ------------------------------------------------------------------------
cd ../../../../dcip-ui

echo ------------------------------------------------------------------------
echo Start Install Node Modules
echo ------------------------------------------------------------------------
${NODEJS_HOME}/npm -v
${NODEJS_HOME}/npm ci

echo ------------------------------------------------------------------------
echo Start Building UI
echo ------------------------------------------------------------------------
${NODEJS_HOME}/npm run build

if [ -d "dist/public" ]; then
    cd dist
    echo ------------------------------------------------------------------------
    echo Current directory ${PWD}
    echo ------------------------------------------------------------------------

    jar cf ../../java/libs/dcip-ui.jar public
fi